# The `src/app` Directory

## Overview

* **src/app** - the application directory.
    * **about** - the about page.
      * **less** - the less files for the about page.
      * **about.js** - the controller for the about page.
      * **about.spec.js** - the test file for the about controller.
      * **about.tpl.html** - the template (the about page html).
    * **admin** - the administration page.
      * **less** - the less files for the admin page.
      * **org-selector** - directory containing an admin page "widget".
         * **less** - the less files for the org-selector widget.
         * **org-selector.js** - the contoller for the org-selector widget.
         * **org-selector.spec.js** - the test file for the org-selector widget controller.
         * **org-selector.tpl.html** - the template (the org-selector html).
      * **admin.js** - the controller for the admin page.
      * **admin.spec.js** - the test file for the admin controller.
      * **admin.tpl.html** - the template (the admin page html).
    * **...pages** - each individual page has main directory as this level in the heiarchy.
      * **less** - each page has a main less folder containing the less file for the page 
(only the page not the page widgets) and a less file for each theme with overrides for the page.
      * **widgets** - a page can have zero to many widgets. Each widget should be in its
own directory with the same file structure as a page (less directory, .js, spec.js, tpl.html).
    * **app.js** - the application controller.
    * **app.spec.js** - the test.
    * **config.js** - the configuration file generated by the build, based on _theme_.

The `src/app` directory contains all code specific to this application. Apart
from `app.js`, its tests & `config.js`, this directory is filled with subdirectories 
corresponding to "pages" or high-level sections of the application. Each directory can 
have as many subdirectories as it needs to maintain a logical organization of sub-sections.


## `app.js`

The main app configuration file. It kickstarts the whole process by requiring all the **main**
modules from `src/app` that are need. Only the **top-level** module needs to be loaded here.
For example in the explorer page there many customizable sections (i.e. detail). The detail module
is not required in `app.js` because it is pulled in by the explorer module (see explorer.js). So 
only the explorer module (the highest level) is requires, as it will ensure all its required 
submodules are included.

Any modules from `src/common` that are required by the app submodules should also be included 
to ensure app-wide dependencies.

```

var PMTViewer = angular.module('PMTViewer', [
    'ui.router', // angular require
    'ui.bootstrap',
    'config'     // include the config module generated by the grunt build from app.config.js
]);

```

## `config.js`

This is the configuration file. The configuration file contains all the theme 
specific data (i.e. social media links, client business name, business url). The
build process requires a theme be specified so that it know's which configuration
file to build. All configuration files should contain the exact same objects,
however depending on the theme, certain elements may be empty. The config.js
is build from the app.config.js using grunt.

## Testing

One of the design philosophies of `PMTViewer` is that tests should exist
alongside the code they test and that the build system should be smart enough to
know the difference and react accordingly. As such, the unit test for `app.js`
is `app.spec.js`, though it is quite minimal.

## Naming Convention

Since PMTViewer is a single page applicaiton, it is important to establish and follow
a naming convention for several items: 
  * AngularJS Contollers
  * HTML divs
  * Less Class Structure

### AngularJS Conrollers

All AngularJS contollers should follow the outlined naming conventions:

1. Page controllers should be named after the page followed by the suffix 'Ctrl'.
    * About Page - AboutCtrl
    * Admin Page - AdminCtrl
    * Explorer Page - ExplorerCtrl
2. Each page has a number of child features, which each have controllers. These child
controllers should always be prefixed with the Page name/abbriviation and suffixed with 
'Ctrl'.
   * Explorer Page's Basemap feature - ExplBasemapCtrl
   * Explorer Page's Right Panel feature - ExplRightPanelCtrl

### HTML Divs

It is the prefered method that only the template html div be given an id attribute,
so that css can target that specific div. Assigning id attributes to other divs should
be avoided if possible. 

All divs given an id attribute should follow the outline naming convensions:

1. Page template divs should be named after the page.
    * About Page
    ```<div id="about" ng-controller="AboutCtrl"></div>```
    * Admin Page
    ```<div id="admin" ng-controller="AdminCtrl"></div>```
    * Explorer Page
    ```<div id="explorer" ng-controller="ExplorerCtrl"></div>```

2. Each page has a number of child features, which have seperate template html. These child
template divs should always be prefixed with the Page name/abbriviation seperated using a dash.
   * Explorer Page's Basemap feature
   ```<div id="expl-basemap" ng-controller="ExplBasemapCtrl"></div>```
   * Explorer Page's Right Panel feature
   ```<div id="expl-right-panel" ng-controller="ExplRightPanelCtrl"></div>```
